<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Robot en Pista ‚Äî Fase 1</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <header class="topbar">
        <div class="row">
            <button id="btnReiniciar" class="btn">Reiniciar</button>
            <button id="btnConfig" class="btn">Configurar</button>            
        </div>
    </header>

    <main class="layout">
        <!-- TABLERO -->
        <section class="panel">
            <div id="board" class="board">
                <div id="grid" class="grid"></div>
                <img id="robot" class="robot"
                    src="data:image/svg+xml;utf8,<?xml version='1.0' encoding='UTF-8'?> <svg xmlns='http://www.w3.org/2000/svg' width='58' height='58' viewBox='0 0 64 64'><g fill='%23fbbf24'><rect x='18' y='18' width='28' height='28' rx='6' ry='6'/><rect x='28' y='8' width='8' height='10' rx='2'/><rect x='12' y='28' width='6' height='8' rx='2'/><rect x='46' y='28' width='6' height='8' rx='2'/></g><circle cx='28' cy='32' r='4' fill='%23000000'/><circle cx='36' cy='32' r='4' fill='%23000000'/></svg>"
                    alt="robot" />
            </div>
        </section>

        <!-- LATERAL -->
        <aside class="panel sidebar">
            <h3 id="panelTitle">Movimientos</h3>
            <div class="row" id="programChips"></div>
            <p id="cfgHint" class="hint" style="display:none">
                En modo Configurar, haz clic en las celdas para (des)marcarlas en verde.
                La primera celda verde ser√° el punto de inicio.
            </p>
            <div id="message" class="msg"></div>
        </aside>

        <div class="row" id="controls">
            <button class="btn" data-cmd="Adelante">Adelante</button>
            <button class="btn" data-cmd="Girar Izquierda">Girar Izq</button>
            <button class="btn" data-cmd="Girar Derecha">Girar Der</button>
            <button class="btn" data-cmd="Bucle Inicio">Bucle ‚ü≤ INICIO</button>
            <button class="btn" data-cmd="Bucle Fin">Bucle ‚ü≤ FIN</button>
            <button id="btnRun" class="btn primary">Ejecutar</button>
        </div>

        <div class="row" id="fileButtons">
            <button id="btnArchivo" class="btn">Cargar desde archivo</button>
            <button id="btnExport" class="btn">Exportar archivo</button>
        </div>

        <!-- BOTONES INFERIORES -->

        <div id="Config-Buttons" class="row">
            <button id="btnClear" class="btn">Limpiar lista</button>
            <button id="btnSaveTrack" class="btn">Guardar pista</button>
            <button id="btnRandom" class="btn">Pista aleatoria</button>
            <button id="btnUsers" onclick="window.location.href='usuarios.html'" class="btn btn-info">Gestionar Administradores</button>
            <button id="btnLogs" onclick="window.location.href='bitacora.html'" class="btn btn-secondary">Ver Bit√°cora</button>
        </div>
    </main>

    <footer class="footer">
        Tablero
    </footer>

    <!-- Modal de inicio de sesi√≥n -->
    <div id="loginModal" style="
  position: fixed; inset: 0; background: rgba(0,0,0,0.5);
  display: none; align-items: center; justify-content: center; z-index: 9999;
">
        <div style="
    background: #fff; border-radius: 12px; padding: 20px; width: 300px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.25);
  ">
            <h3 style="margin-top: 0;">Iniciar sesi√≥n</h3>
            <label for="loginUser">Usuario:</label>
            <input id="loginUser" type="text" class="form-control" style="width:100%;margin-bottom:10px;">
            <label for="loginPass">Contrase√±a:</label>
            <input id="loginPass" type="password" class="form-control" style="width:100%;margin-bottom:10px;">
            <div style="display:flex;justify-content:flex-end;gap:10px;">
                <button id="btnLoginCancel" class="btn">Cancelar</button>
                <button id="btnLoginOk" class="btn primary">Entrar</button>
            </div>
        </div>
    </div>

    <!-- Modal de selecci√≥n de pista para exportar -->
    <div id="exportModal" style="
  position: fixed; inset: 0; background: rgba(0,0,0,0.5);
  display: none; align-items: center; justify-content: center; z-index: 9999;
">
        <div style="
    background: #fff; border-radius: 12px; padding: 20px; width: 300px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.25);
  ">
            <h3 style="margin-top: 0;">Seleccionar pista para exportar</h3>
            <select id="exportSelect" class="form-control" style="width:100%;margin-bottom:10px;">
                <option value="">Cargando...</option>
            </select>
            <div style="display:flex;justify-content:flex-end;gap:10px;">
                <button id="btnExportCancel" class="btn">Cancelar</button>
                <button id="btnExportOk" class="btn primary">Exportar</button>
            </div>
        </div>
    </div>

     <!-- üìã Modal Usuarios -->
    <div id="modalUsuarios" class="modal hidden">
      <div class="modal-content">
        <h3>Gesti√≥n de Usuarios Administradores</h3>
        <form id="formAdmin">
          <input type="hidden" id="adminId">
          <label>Usuario:</label>
          <input type="text" id="username" required>
          <label>Contrase√±a:</label>
          <input type="password" id="password" required>
          <label>Estado:</label>
          <select id="enabled">
            <option value="true">Activo</option>
            <option value="false">Inactivo</option>
          </select>
          <div class="modal-actions">
            <button type="submit" class="btn btn-success">Guardar</button>
            <button type="button" id="cancelar" class="btn btn-secondary">Cancelar</button>
          </div>
        </form>

        <table id="tblAdmins" class="table">
          <thead>
            <tr><th>ID</th><th>Usuario</th><th>Estado</th><th>Acciones</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>

    <!-- üìú Modal Bit√°cora -->
    <div id="modalBitacora" class="modal hidden">
      <div class="modal-content">
        <h3>Hist√≥rico de Acciones</h3>
        <table id="tblBitacora" class="table">
          <thead>
            <tr><th>Fecha</th><th>Usuario</th><th>Acci√≥n</th><th>Detalles</th></tr>
          </thead>
          <tbody></tbody>
        </table>
        <div class="modal-actions">
          <button id="closeBitacora" class="btn btn-secondary">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

    <script src="script.js"></script>

</body>

</html>